---
title: 前端路由的hash模式和history模式
tags:
  - Route
categories:
  - ['Web前端']
abbrlink: 44868
date: 2023-12-05 13:41:30
cover: https://www.yellowwei.cn/img/2023-12-5(2).jpg
---

![](https://www.yellowwei.cn/img/2023-12-5.jpg)

> 前端路由是现代单页面应用（SPA）中不可或缺的一部分，它允许用户在不重新加载整个页面的情况下，实现页面之间的切换。在前端路由的实现中，Hash 模式和 History 模式是两种常见的技术。本文将深入探讨这两种模式的原理和区别。

# Hash 模式

> Hash 模式是基于 URL 的 hash 值来实现的。在 URL 中，hash 值是跟在#符号后面的部分，通常用于指向页面内的某个位置。在 Hash 模式的路由中，我们利用这个特性来模拟完整的 URL 路径。

### 原理

> 当用户点击链接时，只有 hash 值发生变化，浏览器不会向服务器发送请求。这是因为 hash 值的改变只会触发浏览器的 hashchange 事件，而不会导致页面的重新加载。前端路由库可以监听这个事件，根据 hash 值的变化来动态渲染对应的组件，从而实现无刷新的页面切换。

### 优点

> - **兼容性好**：所有支持 JavaScript 的浏览器都支持 hash 值的变化，包括老旧的浏览器。
> - **无需服务器配置**：由于浏览器不会向服务器发送 hash 值，因此无论 hash 值如何变化，服务器都会返回同一个页面。

### 缺点

> - **不利于 SEO**: 搜索引擎通常不会索引 hash 值后的内容，这可能会影响 SPA 的搜索引擎优化。
> - **URL 美观性**: hash 值会在 URL 中添加额外的#符号，这可能会影响 URL 的美观性。

# History 模式

> History 模式是基于 HTML5 的 History API 来实现的。这个 API 允许开发者在不重新加载页面的情况下，对浏览器的历史记录栈进行操作。

### 原理

> 通过 History API，可以使用 pushState 和 replaceState 方法来添加或修改历史记录条目。这意味着开发者可以改变 URL 而不会发送请求到服务器。当用户点击后退或前进按钮时，浏览器会触发 popstate 事件，前端路由库可以监听这个事件来更新页面内容。

### 优点

> - **URL 美观**：History 模式可以提供没有 hash 值的干净 URL。
> - **利于 SEO**：由于 URL 没有 hash 值，搜索引擎可以更好地索引 SPA 的内容。

### 缺点

> - **需要服务器配置**：直接访问或刷新非根 URL 时，服务器需要返回正确的页面。否则，用户可能会看到 404 错误。
> - **浏览器兼容性**：History 模式依赖于 HTML5 History API，不支持老旧的浏览器。

# 总结

> Hash 模式和 History 模式各有优缺点，开发者需要根据项目的需求和服务器的配置来选择合适的路由模式。如果项目对 SEO 有较高要求，或者服务器已经配置好了 URL 重写，History 模式可能是更好的选择。如果项目需要支持老旧浏览器，或者不希望进行服务器配置，Hash 模式可能更加合适。
